#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Running pre-push checks..."

# Option 1: Fast pre-push (recommended for frequent pushes)
# Uncomment this line and comment out the "Full pre-push" section below for faster pushes
# npm run pre-push:fast

# Option 2: Full pre-push (recommended for important pushes to main/master)
echo "ï¿½ Running comprehensive pre-push validation..."
npm run pre-push
if [ $? -ne 0 ]; then
  echo "âŒ Pre-push checks failed. Push aborted."
  echo "ğŸ’¡ For faster pushes, you can use: npm run pre-push:fast"
  exit 1
fi

# Optional: Performance tests (can be commented out for faster pushes)
echo "âš¡ Running performance tests..."
npm run test:performance
if [ $? -ne 0 ]; then
  echo "âš ï¸ Performance tests failed, but continuing push..."
  echo "   Consider checking performance regressions."
fi

echo "âœ… All pre-push checks passed!"
echo "ğŸ‰ Ready to push to remote repository."
