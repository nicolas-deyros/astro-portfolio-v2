---
// Enhanced Audio Player Astro Component
// Wraps the React AudioPlayerUI for use in Astro pages

import AudioPlayerUI from './AudioPlayerUI'

export interface Props {
	text: string
	class?: string
	enableVisualization?: boolean
	autoLoad?: boolean
	client?: 'load' | 'idle' | 'visible' | 'media' | 'only'
}

const {
	text,
	class: className = '',
	enableVisualization = false,
	autoLoad = true,
	client = 'load',
} = Astro.props
---

<div class={`enhanced-audio-player ${className}`}>
	{
		client === 'load' && (
			<AudioPlayerUI
				client:load
				text={text}
				className={className}
				enableVisualization={enableVisualization}
				autoLoad={autoLoad}
			/>
		)
	}

	{
		client === 'idle' && (
			<AudioPlayerUI
				client:idle
				text={text}
				className={className}
				enableVisualization={enableVisualization}
				autoLoad={autoLoad}
			/>
		)
	}

	{
		client === 'visible' && (
			<AudioPlayerUI
				client:visible
				text={text}
				className={className}
				enableVisualization={enableVisualization}
				autoLoad={autoLoad}
			/>
		)
	}

	{
		client === 'media' && (
			<AudioPlayerUI
				client:media="(max-width: 768px)"
				text={text}
				className={className}
				enableVisualization={enableVisualization}
				autoLoad={autoLoad}
			/>
		)
	}

	{
		client === 'only' && (
			<AudioPlayerUI
				client:only="react"
				text={text}
				className={className}
				enableVisualization={enableVisualization}
				autoLoad={autoLoad}
			/>
		)
	}
</div>

<script>
	// Client-side functionality can be added here if needed
</script>

<style>
	.enhanced-audio-player {
		/* Container styles */
		width: 100%;
		max-width: 100%;
	}

	.enhanced-audio-player :global(.audio-player-container) {
		/* Global styles for the audio player */
		border-radius: 0.5rem;
		box-shadow:
			0 1px 3px 0 rgba(0, 0, 0, 0.1),
			0 1px 2px 0 rgba(0, 0, 0, 0.06);
	}

	/* Dark mode improvements */
	:global(.dark) .enhanced-audio-player :global(.audio-player-container) {
		box-shadow:
			0 1px 3px 0 rgba(0, 0, 0, 0.3),
			0 1px 2px 0 rgba(0, 0, 0, 0.2);
	}

	/* Responsive adjustments */
	@media (max-width: 768px) {
		.enhanced-audio-player {
			font-size: 0.875rem;
		}
	}
</style>
